<div align="center">

# üçä OrangeChat

**Secure. Real-Time. Minimalist.**

<p align="center">
  A robust group messaging platform built for speed and security.
  <br />
  Powered by <b>Next.js App Router</b> and <b>Supabase Realtime</b>.
</p>

[View Demo](#) ‚Ä¢ [Report Bug](#) ‚Ä¢ [Request Feature](#)

</div>

---

## üìã Table of Contents

- [About The Project](#-about-the-project)
- [Key Features](#-key-features)
- [Tech Stack](#-tech-stack)
- [Architecture & Security](#-architecture--security)
- [Getting Started](#-getting-started)
- [Database Schema](#-database-schema)
- [Contributing](#-contributing)

---

## üìñ About The Project

**OrangeChat** is designed to solve the complexity of modern chat applications. It focuses on a **"Lean Governance"** model where room management is strict but simple, ensuring secure communication without administrative bloat.

> **Note:** Unlike basic chat tutorials, OrangeChat implements **Row Level Security (RLS)** at the database layer. This means user data is cryptographically isolated even if the frontend is compromised.

---

## üöÄ Key Features

### üîí Fortified Security
* **Strict Access:** Unverified email addresses cannot sign in.
* **Middleware Protection:** Next.js Middleware guards all dashboard routes.
* **Data Isolation:** Users can never fetch messages from rooms they haven't joined.

### ‚ö° Real-Time Performance
* **Sub-millisecond Latency:** Powered by Supabase Realtime (Phoenix Channels).
* **Live Presence:** Instant updates for message delivery and deletions.

### üëë Role-Based Access Control (RBAC)

| Feature | Admin (Creator) | Member |
| :--- | :---: | :---: |
| **Send Messages** | ‚úÖ | ‚úÖ |
| **View Group ID** | ‚úÖ | ‚ùå |
| **Delete Messages** | ‚úÖ | ‚ùå |
| **Kick Users** | ‚úÖ | ‚ùå |

### üé® Modern UI/UX
* **Dark/Light Mode:** System-aware theme toggling.
* **Responsive Design:** Fully optimized for mobile and desktop.

---

## üíª Tech Stack

* **Framework:** Next.js 14 (App Router, Server Actions)
* **Language:** TypeScript
* **Styling:** Tailwind CSS & Lucide Icons
* **Backend-as-a-Service:** Supabase
* **Database:** PostgreSQL
* **Authentication:** Supabase Auth (JWT)

---

## üèó Architecture & Security

This project does not rely on fragile API endpoints for security. Instead, it uses **PostgreSQL Policies**.

> **The Golden Rule:** "Security lives in the Database, not the Frontend."

### The Data Model
* **Profiles:** Publicly readable profiles, strictly editable by the owner.
* **Rooms:** Visible only to members of that room.
* **Messages:** Insertable by members; Deletable only by Admins via RLS policy.

---

## ‚ö° Getting Started

### Prerequisites
* Node.js 18+
* npm or yarn
* A free Supabase account

### Installation

1.  **Clone the repo**
    ```bash
    git clone [https://github.com/AtharvaShastrakar/orangeChat.git](https://github.com/AtharvaShastrakar/orangeChat.git)
    cd orangeChat
    ```

2.  **Install packages**
    ```bash
    npm install
    ```

3.  **Set up Environment Variables**
    Create a `.env.local` file in the root:
    ```env
    NEXT_PUBLIC_SUPABASE_URL=your_project_url_here
    NEXT_PUBLIC_SUPABASE_ANON_KEY=your_anon_key_here
    ```

4.  **Run the App**
    ```bash
    npm run dev
    ```

---

## üíæ Database Setup

Run this SQL in your **Supabase SQL Editor** to create the tables and security policies:

```sql
-- 1. Create Profiles Table
create table public.profiles (
  id uuid references auth.users on delete cascade not null primary key,
  email text,
  avatar_url text
);

-- 2. Create Rooms Table
create table public.rooms (
  id uuid default gen_random_uuid() primary key,
  name text not null,
  group_id text unique default substr(md5(random()::text), 0, 8),
  created_by uuid references public.profiles(id)
);

-- 3. Create Membership Junction
create table public.room_members (
  room_id uuid references public.rooms(id) on delete cascade,
  user_id uuid references public.profiles(id) on delete cascade,
  role text check (role in ('admin', 'member')),
  primary key (room_id, user_id)
);

-- 4. Create Messages Table
create table public.messages (
  id bigint generated by default as identity primary key,
  room_id uuid references public.rooms(id) on delete cascade,
  user_id uuid references public.profiles(id),
  content text not null,
  created_at timestamp with time zone default timezone('utc'::text, now())
);

-- 5. Enable Row Level Security (RLS)
alter table profiles enable row level security;
alter table rooms enable row level security;
alter table room_members enable row level security;
alter table messages enable row level security;

-- 6. Create Policies (Simplified Example)
create policy "Public profiles" on profiles for select using (true);
create policy "User can update own profile" on profiles for update using (auth.uid() = id);
